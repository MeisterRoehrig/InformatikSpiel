(()=>{var e={31:(e,t,n)=>{const o=n(655);o.keys().forEach(o)},819:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"android-chrome-192x192.png"},505:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"android-chrome-512x512.png"},589:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"apple-touch-icon.png"},654:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"browserconfig.xml"},360:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"favicon-16x16.png"},923:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"favicon-32x32.png"},708:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"favicon.ico"},689:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"mstile-150x150.png"},307:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"safari-pinned-tab.svg"},350:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=n.p+"site.webmanifest"},655:(e,t,n)=>{var o={"./android-chrome-192x192.png":819,"./android-chrome-512x512.png":505,"./apple-touch-icon.png":589,"./browserconfig.xml":654,"./favicon-16x16.png":360,"./favicon-32x32.png":923,"./favicon.ico":708,"./mstile-150x150.png":689,"./safari-pinned-tab.svg":307,"./site.webmanifest":350};function d(e){var t=s(e);return n(t)}function s(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}d.keys=function(){return Object.keys(o)},d.resolve=s,e.exports=d,d.id=655}},t={};function n(o){var d=t[o];if(void 0!==d)return d.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{"use strict";n(31);const e=new class{constructor(){this.data={InsertNode:{color:"rgb(255,255,243)"},Placeholder:{color:"rgb(255,255,243)"},InsertCase:{color:"rgb(250, 218, 209)"},InputNode:{use:!0,id:"InputButton",text:"Eingabe-Feld",icon:"taskIcon",color:"rgb(253, 237, 206)"},OutputNode:{use:!0,id:"OutputButton",text:"Ausgabe-Feld",icon:"taskIcon",color:"rgb(253, 237, 206)"},TaskNode:{use:!0,id:"TaskButton",text:"Anweisung",icon:"taskIcon",color:"rgb(253, 237, 206)"},CountLoopNode:{use:!0,id:"CountLoopButton",text:"Zählergesteuerte Schleife",icon:"countLoopIcon",color:"rgb(220, 239, 231)"},HeadLoopNode:{use:!0,id:"HeadLoopButton",text:"Kopfgesteuerte Schleife",icon:"countLoopIcon",color:"rgb(220, 239, 231)"},FootLoopNode:{use:!0,id:"FootLoopButton",text:"Fußgesteuerte Schleife",icon:"footLoopIcon",color:"rgb(220, 239, 231)"},BranchNode:{use:!0,id:"BranchButton",text:"Verzweigung",icon:"branchIcon",color:"rgb(250, 218, 209)"},CaseNode:{use:!0,id:"CaseButton",text:"Fallunterscheidung",icon:"caseIcon",color:"rgb(250, 218, 209)"},FunctionNode:{use:!0,id:"FunctionButton",text:"Funktionsblock",icon:"funcIcon",color:"rgb(255, 255, 255)"},TryCatchNode:{use:!0,id:"TryCatchButton",text:"Try-Catch-Block",icon:"tryCatchIcon",color:"rgb(250, 218, 209)"}},this.alternatives={python:{InsertNode:{color:"rgb(255,255,243)"},Placeholder:{color:"rgb(255,255,243)"},InsertCase:{color:"rgb(250, 218, 209)"},InputNode:{use:!0,id:"InputButton",text:"Eingabe-Feld",icon:"taskIcon",color:"rgb(253, 237, 206)"},OutputNode:{use:!0,id:"OutputButton",text:"Ausgabe-Feld",icon:"taskIcon",color:"rgb(253, 237, 206)"},TaskNode:{use:!0,id:"TaskButton",text:"Anweisung",icon:"taskIcon",color:"rgb(253, 237, 206)"},CountLoopNode:{use:!1,id:"CountLoopButton",text:"Zählergesteuerte Schleife",icon:"countLoopIcon",color:"rgb(220, 239, 231)"},HeadLoopNode:{use:!0,id:"HeadLoopButton",text:"Schleife",icon:"countLoopIcon",color:"rgb(220, 239, 231)"},FootLoopNode:{use:!1,id:"FootLoopButton",text:"Fußgesteuerte Schleife",icon:"footLoopIcon",color:"rgb(220, 239, 231)"},BranchNode:{use:!0,id:"BranchButton",text:"Verzweigung",icon:"branchIcon",color:"rgb(250, 218, 209)"},CaseNode:{use:!0,id:"CaseButton",text:"Fallunterscheidung",icon:"caseIcon",color:"rgb(250, 218, 209)"},FunctionNode:{use:!1,id:"FunctionButton",text:"Funktionsblock",icon:"funcIcon",color:"rgb(255, 255, 255)"},TryCatchNode:{use:!0,id:"TryCatchButton",text:"Try-Catch-Block",icon:"tryCatchIcon",color:"rgb(250, 218, 209)"}},python_func:{InsertNode:{color:"rgb(255,255,243)"},Placeholder:{color:"rgb(255,255,243)"},InsertCase:{color:"rgb(250, 218, 209)"},InputNode:{use:!0,id:"InputButton",text:"Eingabe-Feld",icon:"taskIcon",color:"rgb(253, 237, 206)"},OutputNode:{use:!0,id:"OutputButton",text:"Ausgabe-Feld",icon:"taskIcon",color:"rgb(253, 237, 206)"},TaskNode:{use:!0,id:"TaskButton",text:"Anweisung",icon:"taskIcon",color:"rgb(253, 237, 206)"},CountLoopNode:{use:!0,id:"CountLoopButton",text:"Zählergesteuerte Schleife",icon:"countLoopIcon",color:"rgb(220, 239, 231)"},HeadLoopNode:{use:!0,id:"HeadLoopButton",text:"Kopfgesteuerte Schleife",icon:"countLoopIcon",color:"rgb(220, 239, 231)"},FootLoopNode:{use:!0,id:"FootLoopButton",text:"Fußgesteuerte Schleife",icon:"footLoopIcon",color:"rgb(220, 239, 231)"},BranchNode:{use:!0,id:"BranchButton",text:"Verzweigung",icon:"branchIcon",color:"rgb(250, 218, 209)"},CaseNode:{use:!0,id:"CaseButton",text:"Fallunterscheidung",icon:"caseIcon",color:"rgb(250, 218, 209)"},FunctionNode:{use:!0,id:"FunctionButton",text:"Funktionsblock",icon:"funcIcon",color:"rgb(255, 255, 255)"},TryCatchNode:{use:!0,id:"TryCatchButton",text:"Try-Catch-Block",icon:"tryCatchIcon",color:"rgb(250, 218, 209)"}},standard:{InsertNode:{color:"rgb(255,255,243)"},Placeholder:{color:"rgb(255,255,243)"},InsertCase:{color:"rgb(250, 218, 209)"},InputNode:{use:!0,id:"InputButton",text:"Eingabe-Feld",icon:"taskIcon",color:"rgb(253, 237, 206)"},OutputNode:{use:!0,id:"OutputButton",text:"Ausgabe-Feld",icon:"taskIcon",color:"rgb(253, 237, 206)"},TaskNode:{use:!0,id:"TaskButton",text:"Anweisung",icon:"taskIcon",color:"rgb(253, 237, 206)"},CountLoopNode:{use:!0,id:"CountLoopButton",text:"Zählergesteuerte Schleife",icon:"countLoopIcon",color:"rgb(220, 239, 231)"},HeadLoopNode:{use:!0,id:"HeadLoopButton",text:"Kopfgesteuerte Schleife",icon:"countLoopIcon",color:"rgb(220, 239, 231)"},FootLoopNode:{use:!0,id:"FootLoopButton",text:"Fußgesteuerte Schleife",icon:"footLoopIcon",color:"rgb(220, 239, 231)"},BranchNode:{use:!0,id:"BranchButton",text:"Verzweigung",icon:"branchIcon",color:"rgb(250, 218, 209)"},CaseNode:{use:!0,id:"CaseButton",text:"Fallunterscheidung",icon:"caseIcon",color:"rgb(250, 218, 209)"},FunctionNode:{use:!1,id:"FunctionButton",text:"Funktionsblock",icon:"funcIcon",color:"rgb(255, 255, 255)"},TryCatchNode:{use:!1,id:"TryCatchButton",text:"Try-Catch-Block",icon:"tryCatchIcon",color:"rgb(250, 218, 209)"}}}}get(){return this.data}loadConfig(e){e in this.alternatives&&(this.data=this.alternatives[e])}};function t(){const e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()}const o=new class{constructor(e={id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}){this.tree=e,this.presenter=null,"undefined"!=typeof Storage&&"tree"in localStorage&&this.setTree(JSON.parse(localStorage.tree))}setPresenter(e){this.presenter=e}getTree(){return this.tree}setTree(e){this.tree=e}reset(){this.tree={id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}}findAndAlterElement(e,t,n,o,d){if(null===t||"Placeholder"===t.type)return t;if(t.id===e)return t=(n=n.bind(this))(t,o,d),null===this.presenter.getMoveId()&&this.presenter.resetButtons(),t;switch(t.type){case"InsertNode":case"InsertCase":return t.followElement=this.findAndAlterElement(e,t.followElement,n,o,d),t;case"InputNode":case"OutputNode":case"TaskNode":return t.followElement=this.findAndAlterElement(e,t.followElement,n,!0,d),t;case"HeadLoopNode":case"FootLoopNode":case"CountLoopNode":case"FunctionNode":return t.child=this.findAndAlterElement(e,t.child,n,!1,d),t.followElement=this.findAndAlterElement(e,t.followElement,n,!0,d),t;case"BranchNode":return t.trueChild=this.findAndAlterElement(e,t.trueChild,n,!1,d),t.falseChild=this.findAndAlterElement(e,t.falseChild,n,!1,d),t.followElement=this.findAndAlterElement(e,t.followElement,n,!0,d),t;case"TryCatchNode":return t.tryChild=this.findAndAlterElement(e,t.tryChild,n,!1,d),t.catchChild=this.findAndAlterElement(e,t.catchChild,n,!1,d),t.followElement=this.findAndAlterElement(e,t.followElement,n,!0,d),t;case"CaseNode":{const o=[];for(const s of t.cases){const t=this.findAndAlterElement(e,s,n,!1,d);null!==t&&o.push(t)}o.length>=2&&(t.cases=o);const s=this.findAndAlterElement(e,t.defaultNode,n,!1,d);return null===s?t.defaultOn=!1:t.defaultNode=s,t.followElement=this.findAndAlterElement(e,t.followElement,n,!0,d),t}}}removeNode(e,t,n){return"InsertCase"===e.type?null:null!==e.followElement.followElement||t?e.followElement.followElement:{type:"Placeholder"}}editElement(e,t,n){if("FunctionNode"===e.type){const t=n.split("|");if("funcname"===t[0])e.text=t[1];else{if(0!==e.parameters.length){let n=0;for(const o of e.parameters){if(t[0]===o.pos)return e.parameters[n].parName=t[1],e;n+=1}}e.parameters.push({pos:t[0],parName:t[1]})}}else e.text=n;return e}insertElement(e,t,n){const o=this.presenter.getNextInsertElement();return null!==e.followElement&&"Placeholder"!==e.followElement.type&&(o.followElement.followElement=e.followElement),e.followElement=o,e}switchDefaultCase(e,t,n){return e.defaultOn?e.defaultOn=!1:e.defaultOn=!0,e}insertNewCase(e,n,o){return e.cases.length<7&&e.cases.push({id:t(),type:"InsertCase",text:"Fall",followElement:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}}),e}getElementInTree(e,t){if(null===t||"Placeholder"===t.type)return null;if(t.id===e)return JSON.parse(JSON.stringify(t));switch(t.type){case"InsertNode":case"InputNode":case"OutputNode":case"TaskNode":case"InsertCase":return this.getElementInTree(e,t.followElement);case"HeadLoopNode":case"CountLoopNode":case"FootLoopNode":case"FunctionNode":{const n=this.getElementInTree(e,t.child);return null===n?this.getElementInTree(e,t.followElement):n}case"BranchNode":{let n=this.getElementInTree(e,t.trueChild);return null===n?(n=this.getElementInTree(e,t.falseChild),null===n?this.getElementInTree(e,t.followElement):n):n}case"TryCatchNode":{let n=this.getElementInTree(e,t.tryChild);return null===n?(n=this.getElementInTree(e,t.catchChild),null===n?this.getElementInTree(e,t.followElement):n):n}case"CaseNode":{let n=null;for(const o of t.cases){const t=this.getElementInTree(e,o);null!=t&&(n=t)}return null===n?(n=this.getElementInTree(e,t.defaultNode),null===n?this.getElementInTree(e,t.followElement):n):n}}}};class d{constructor(e){this.model=e,this.insertMode=!1,this.settingFunctionMode=!1,this.views=[],this.moveId=null,this.nextInsertElement=null,this.displaySourcecode=!1,this.undoList=[],this.redoList=[]}addView(e){this.views.push(e)}getInsertMode(){return this.insertMode}getSettingFunctionMode(){return this.settingFunctionMode}getModelTree(){return this.model.getTree()}getElementByUid(e){return this.model.getElementInTree(e,this.model.getTree())}resetButtons(){for(const e of this.views)e.resetButtons()}reset(){this.insertMode=!1,this.settingFunctionMode=!1,this.nextInsertElement=null,this.moveId=null}setSourcecodeDisplay(e){this.displaySourcecode=e}getSourcecodeDisplay(){return this.displaySourcecode}updateBrowserStore(){"undefined"!=typeof Storage&&(localStorage.tree=JSON.stringify(this.model.getTree()),localStorage.displaySourcecode=this.displaySourcecode)}getMoveId(){return this.moveId}getNextInsertElement(){return this.nextInsertElement}renderAllViews(){for(const e of this.views)e.render(this.model.getTree())}init(){this.renderAllViews()}startTransforming(e){for(const t of this.views)t.setLang(e.target.value);this.renderAllViews()}alterSourcecodeDisplay(e){this.displaySourcecode?this.displaySourcecode=!1:this.displaySourcecode=!0,this.updateBrowserStore();for(const e of this.views)e.displaySourcecode("ToggleSourcecode")}insertNode(e,n){switch(e){case"InputButton":this.nextInsertElement={id:t(),type:"InputNode",text:"",followElement:{id:t(),type:"InsertNode",followElement:null}};break;case"OutputButton":this.nextInsertElement={id:t(),type:"OutputNode",text:"",followElement:{id:t(),type:"InsertNode",followElement:null}};break;case"TaskButton":this.nextInsertElement={id:t(),type:"TaskNode",text:"Anweisung",followElement:{id:t(),type:"InsertNode",followElement:null}};break;case"BranchButton":this.nextInsertElement={id:t(),type:"BranchNode",text:"Bedingung",followElement:{id:t(),type:"InsertNode",followElement:null},trueChild:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}},falseChild:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}};break;case"CaseButton":this.nextInsertElement={id:t(),type:"CaseNode",text:"Variable",followElement:{id:t(),type:"InsertNode",followElement:null},defaultOn:!0,defaultNode:{id:t(),type:"InsertCase",text:"Sonst",followElement:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}},cases:[{id:t(),type:"InsertCase",text:"Fall",followElement:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}},{id:t(),type:"InsertCase",text:"Fall",followElement:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}}]};break;case"CountLoopButton":this.nextInsertElement={id:t(),type:"CountLoopNode",text:"Zählbedingung",followElement:{id:t(),type:"InsertNode",followElement:null},child:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}};break;case"HeadLoopButton":this.nextInsertElement={id:t(),type:"HeadLoopNode",text:"Gültigkeitsbedingung",followElement:{id:t(),type:"InsertNode",followElement:null},child:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}};break;case"FunctionButton":this.nextInsertElement={id:t(),type:"FunctionNode",text:"",parameters:[],followElement:{id:t(),type:"InsertNode",followElement:null},child:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}},this.settingFunctionMode=!0;break;case"FootLoopButton":this.nextInsertElement={id:t(),type:"FootLoopNode",text:"Gültigkeitsbedingung",followElement:{id:t(),type:"InsertNode",followElement:null},child:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}};break;case"TryCatchButton":this.nextInsertElement={id:t(),type:"TryCatchNode",text:"",followElement:{id:t(),type:"InsertNode",followElement:null},tryChild:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}},catchChild:{id:t(),type:"InsertNode",followElement:{type:"Placeholder"}}}}void 0!==n.dataTransfer&&(n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text",e));const o=document.getElementById(e);o.classList.contains("boldText")?(this.resetButtons(),this.reset()):(this.resetButtons(),this.insertMode=!0,o.classList.add("boldText")),this.renderAllViews()}resetDrop(){this.insertMode?(this.reset(),this.resetButtons(),this.renderAllViews()):this.resetButtons()}resetModel(){this.updateUndo(),this.model.reset(),this.checkUndo(),this.updateBrowserStore(),this.renderAllViews(),document.getElementById("IEModal").classList.remove("active")}switchDefaultState(e){this.updateUndo(),this.model.setTree(this.model.findAndAlterElement(e,this.model.getTree(),this.model.switchDefaultCase,!1,"")),this.checkUndo(),this.updateBrowserStore(),this.renderAllViews()}addCase(e){this.updateUndo(),this.model.setTree(this.model.findAndAlterElement(e,this.model.getTree(),this.model.insertNewCase,!1,"")),this.checkUndo(),this.updateBrowserStore(),this.renderAllViews()}removeElement(e){const t=this.model.getElementInTree(e,this.model.getTree());switch(t.type){case"TaskNode":case"InputNode":case"OutputNode":this.removeNodeFromTree(e);break;case"HeadLoopNode":case"CountLoopNode":case"FootLoopNode":case"FunctionNode":"Placeholder"!==t.child.followElement.type?this.prepareRemoveQuestion(e):this.removeNodeFromTree(e);break;case"BranchNode":"Placeholder"!==t.trueChild.followElement.type||"Placeholder"!==t.falseChild.followElement.type?this.prepareRemoveQuestion(e):this.removeNodeFromTree(e);break;case"TryCatchNode":"Placeholder"!==t.tryChild.followElement.type||"Placeholder"!==t.catchChild.followElement.type?this.prepareRemoveQuestion(e):this.removeNodeFromTree(e);break;case"CaseNode":{let n=!1;for(const e of t.cases)"Placeholder"!==e.followElement.followElement.type&&(n=!0);"Placeholder"!==t.defaultNode.followElement.followElement.type&&(n=!0),n?this.prepareRemoveQuestion(e):this.removeNodeFromTree(e);break}case"InsertCase":"Placeholder"!==t.followElement.followElement.type?this.prepareRemoveQuestion(e):this.removeNodeFromTree(e)}}prepareRemoveQuestion(e){const t=document.getElementById("modal-content"),n=document.getElementById("modal-footer");for(;t.hasChildNodes();)t.removeChild(t.lastChild);for(;n.hasChildNodes();)n.removeChild(n.lastChild);t.appendChild(document.createTextNode("Dieses Element und alle darin erstellten Blöcke löschen?"));const o=document.createElement("div");o.classList.add("modal-buttons","acceptIcon","hand"),o.addEventListener("click",(()=>this.removeNodeFromTree(e,!0))),n.appendChild(o);const d=document.createElement("div");d.classList.add("modal-buttons","deleteIcon","hand"),d.addEventListener("click",(()=>document.getElementById("IEModal").classList.remove("active"))),n.appendChild(d),document.getElementById("IEModal").classList.add("active")}removeNodeFromTree(e,t=!1){this.updateUndo(),this.model.setTree(this.model.findAndAlterElement(e,this.model.getTree(),this.model.removeNode,!1,"")),this.checkUndo(),this.updateBrowserStore(),this.renderAllViews(),t&&document.getElementById("IEModal").classList.remove("active")}removeParamFromParameters(e){let t=this.model.getTree();const n=[];for(;"FunctionNode"!==t.type;)n.push(t),t=t.followElement;const o=t.parameters;for(const d of o){const s=parseInt(d.pos);if(s===e){let e=s/3;for(o.splice(e,1);e<o.length;)o[e].pos-=3,e+=1;t.parameters=o;let d=n.length-1;for(;d>-1;){const e=n[d];e.followElement=t,t=e,d-=1}return this.model.setTree(t),this.updateBrowserStore(),void this.renderAllViews()}}}moveElement(e){this.moveId=e,this.insertMode=!0,this.nextInsertElement=this.model.getElementInTree(e,this.model.getTree()),this.nextInsertElement.followElement.followElement=null,this.renderAllViews()}editElement(e,t,n=""){this.updateUndo(),this.model.setTree(this.model.findAndAlterElement(e,this.model.getTree(),this.model.editElement,!1,n+t)),this.checkUndo(),this.updateBrowserStore(),this.renderAllViews()}appendElement(e){this.updateUndo();const t=this.moveId;t&&this.model.setTree(this.model.findAndAlterElement(this.moveId,this.model.getTree(),this.model.removeNode,!1,""));const n=this.nextInsertElement.id;this.model.setTree(this.model.findAndAlterElement(e,this.model.getTree(),this.model.insertElement,!1,"")),t&&this.resetButtons(),this.reset(),this.checkUndo(),this.updateBrowserStore(),this.renderAllViews(),t||"TryCatchNode"===this.getElementByUid(n).type||this.switchEditState(n)}switchEditState(e,t=null){let n=document.getElementById(e);if(n.children[0].children[0].classList.contains("func-box-header")){let e=null;e=null===t?n.children[0].children[0].children[1].children[0]:n.children[0].children[0].children[2].children[t].children[0],e&&e.click()}else n=n.getElementsByClassName("input-group editField "+e).length?n.childNodes[0].classList.contains("tryCatchNode")?n.getElementsByClassName("input-group editField "+e)[1]:n.getElementsByClassName("input-group editField "+e)[0]:n.children[0].classList.contains("tryCatchNode")?n.getElementsByClassName("tryCatchNode")[1].children[1].children[1]:n.getElementsByClassName("input-group editField")[0],n.previousSibling.style.display="none",n.style.display="inline-flex",n.getElementsByTagName("input")[0].select()}getStringifiedTree(){return JSON.stringify(this.model.getTree())}saveDialog(){const e="data:application/json;charset=utf-8,"+encodeURIComponent(this.getStringifiedTree()),t="struktog_"+new Date(Date.now()).toJSON().substring(0,10)+".json",n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.click()}readFile(e){const t=new FileReader;t.onload=e=>{const t=JSON.parse(e.target.result);this.updateUndo(),this.model.setTree(t),this.checkUndo(),this.renderAllViews(),this.updateBrowserStore()},t.readAsText(e.target.files[0])}updateUndo(){this.undoList.push(this.getStringifiedTree());for(const e of document.getElementsByClassName("UndoIconButtonOverlay"))e.classList.remove("disableIcon");this.redoList=[];for(const e of document.getElementsByClassName("RedoIconButtonOverlay"))e.classList.add("disableIcon")}undo(){if(this.undoList.length){if(this.redoList.unshift(this.getStringifiedTree()),this.model.setTree(JSON.parse(this.undoList[this.undoList.length-1])),this.undoList.pop(),0===this.undoList)for(const e of document.getElementsByClassName("UndoIconButtonOverlay"))e.classList.add("disableIcon");for(const e of document.getElementsByClassName("RedoIconButtonOverlay"))e.classList.remove("disableIcon");this.renderAllViews(),this.updateBrowserStore()}}checkUndo(){if(this.undoList[this.undoList.length-1]===this.getStringifiedTree()&&(this.undoList.pop(),0===this.undoList))for(const e of document.getElementsByClassName("UndoIconButtonOverlay"))e.classList.add("disableIcon")}redo(){if(this.redoList.length){if(this.undoList.push(this.getStringifiedTree()),this.model.setTree(JSON.parse(this.redoList[0])),this.redoList.shift(),0===this.redoList.length)for(const e of document.getElementsByClassName("RedoIconButtonOverlay"))e.classList.add("disableIcon");for(const e of document.getElementsByClassName("UndoIconButtonOverlay"))e.classList.remove("disableIcon");this.renderAllViews(),this.updateBrowserStore()}}}function s(e,t=[],n=!1){const o=document.createElement(e);for(const e of t)o.classList.add(e);return n&&n.appendChild(o),o}class a{constructor(e,t){this.presenter=e,this.domRoot=t,this.size=7,this.buttonList=["InputNode","OutputNode","TaskNode","CountLoopNode","HeadLoopNode","FootLoopNode","BranchNode","CaseNode","TryCatchNode","FunctionNode"],this.preRender()}preRender(){const t=document.createElement("div");t.classList.add("columnEditorFull");const n=document.createElement("div"),o=document.createElement("strong");o.classList.add("margin-small"),o.appendChild(document.createTextNode("Element wählen:")),n.appendChild(o),t.appendChild(n);const d=document.createElement("div");d.classList.add("container","justify-center");for(const t of this.buttonList)e.get()[t].use&&d.appendChild(this.createButton(t));t.appendChild(d);const s=document.createElement("div");s.classList.add("columnEditorFull","headerContainer");const a=document.createElement("strong");a.classList.add("margin-small","floatBottom"),a.appendChild(document.createTextNode("Editor:")),s.appendChild(a);const i=document.createElement("div");i.id="struktoOptions1",i.classList.add("struktoOptions1"),s.appendChild(i),this.createStrukOptions(i);const l=document.createElement("div");l.classList.add("vcontainer","columnEditorStructogram");const c=document.createElement("div");c.classList.add("columnAuto","container");const r=document.createElement("div");r.classList.add("columnAuto-6");const p=document.createElement("div");p.classList.add("borderWidth","frameLeft");const h=document.createElement("div");h.classList.add("columnAuto"),h.id="structogram",l.appendChild(c),c.appendChild(h),c.appendChild(p),l.appendChild(r),this.domRoot.appendChild(t),this.domRoot.appendChild(s),this.domRoot.appendChild(l);const u=document.createElement("div");u.classList.add("columnEditorCode","container"),this.domRoot.appendChild(u);const m=document.createElement("div");m.id="struktoOptions2",m.classList.add("columnFull","container","struktoOptions2"),u.appendChild(m),this.createStrukOptions(m);const f=document.createElement("div");f.id="SourcecodeDisplay",f.classList.add("fullWidth","fullHeight","vcontainer"),f.style.display="none",u.appendChild(f),this.domRoot=document.getElementById("structogram")}createStrukOptions(e){this.generateUndoRedoButtons(this.presenter,e),function(e,t){const n=document.createElement("div");n.classList.add("struktoOption","resetIcon","tooltip","tooltip-bottom","hand"),n.setAttribute("data-tooltip","Reset"),n.addEventListener("click",(()=>{const t=document.getElementById("modal-content"),n=document.getElementById("modal-footer");for(;t.hasChildNodes();)t.removeChild(t.lastChild);for(;n.hasChildNodes();)n.removeChild(n.lastChild);t.appendChild(document.createTextNode("Alles löschen?"));const o=document.createElement("div");o.classList.add("modal-buttons","acceptIcon","hand"),o.addEventListener("click",(()=>e.resetModel())),n.appendChild(o);const d=document.createElement("div");d.classList.add("modal-buttons","deleteIcon","hand"),d.addEventListener("click",(()=>document.getElementById("IEModal").classList.remove("active"))),n.appendChild(d),document.getElementById("IEModal").classList.add("active")})),t.appendChild(n)}(this.presenter,e)}generateUndoRedoButtons(e,t){const n=document.createElement("div");n.classList.add("struktoOption","undoIcon","tooltip","tooltip-bottom","hand"),n.setAttribute("data-tooltip","Undo"),t.appendChild(n);const o=document.createElement("div");o.classList.add("fullWidth","fullHeight","UndoIconButtonOverlay","disableIcon"),o.addEventListener("click",(()=>e.undo())),n.appendChild(o);const d=document.createElement("div");d.classList.add("struktoOption","redoIcon","tooltip","tooltip-bottom","hand"),d.setAttribute("data-tooltip","Redo"),t.appendChild(d);const s=document.createElement("div");s.classList.add("fullWidth","fullHeight","RedoIconButtonOverlay","disableIcon"),s.addEventListener("click",(()=>e.redo())),d.appendChild(s)}createButton(t){const n=document.createElement("div");n.classList.add("columnInput","insertButton","hand"),n.style.backgroundColor=e.get()[t].color,n.id=e.get()[t].id,n.draggable="true",n.addEventListener("click",(n=>this.presenter.insertNode(e.get()[t].id,n))),n.addEventListener("dragstart",(n=>this.presenter.insertNode(e.get()[t].id,n))),n.addEventListener("dragend",(()=>this.presenter.resetDrop()));const o=document.createElement("span");o.appendChild(document.createTextNode(e.get()[t].text));const d=document.createElement("div");return d.classList.add(e.get()[t].icon,"buttonLogo"),n.append(d),n.append(o),n}render(e){for(;this.domRoot.hasChildNodes();)this.domRoot.removeChild(this.domRoot.lastChild);for(const t of this.renderElement(e,!1,!1,this.presenter.getSettingFunctionMode()))this.applyCodeEventListeners(t),this.domRoot.appendChild(t);const t=document.createElement("div");t.classList.add("frameTop","borderHeight"),this.domRoot.appendChild(t)}createFunctionHeaderTextEl(e,t,n,o,d,s=null){const a=document.createElement("span");a.classList.add("func-header-text-div"),null===s||""===s?a.appendChild(document.createTextNode(o)):a.appendChild(document.createTextNode(s));const i=document.createElement("div");if(i.classList.add("function-elem"),i.style.display="flex",i.style.flexDirection="row",i.appendChild(a),!e.classList.contains("func-box-header")){const e=document.createElement("button");e.classList.add("trashcan","optionIcon","hand","tooltip","tooltip-bottoml"),e.setAttribute("data-tooltip","Entfernen"),e.addEventListener("click",(()=>{this.presenter.removeParamFromParameters(t)})),a.addEventListener("mouseover",(()=>{a.parentElement.appendChild(e)})),a.parentElement.addEventListener("mouseleave",(()=>{e.remove()}))}return a.addEventListener("click",(()=>{i.remove();const a=document.createElement("input");a.classList.add("function-elem","func-header-input"),a.contentEditable=!0,a.style.border="solid 1px black",a.style.margin="0 0 0 0",a.style.width=n+"ch",a.size=n,a.type="text",a.placeholder=o,a.value=s,e.insertBefore(a,e.childNodes[t]);const l="keyup,keypress,focus,blur,change,input".split(",");for(const o of l)a.addEventListener(o,(o=>{if("keypress"===o.type&&"Enter"===o.code){const n=document.createElement("span");n.classList.add("func-header-text-div"),n.appendChild(document.createTextNode(a.value)),e.classList.contains("func-box-header")?this.presenter.editElement(d,a.value,"funcname|"):this.presenter.editElement(d,a.value,String(t)+"|"),this.presenter.renderAllViews();const o=document.createElement("div");o.classList.add("function-elem"),o.appendChild(n),n.addEventListener("click",(()=>{o.remove(),e.insertBefore(a,e.childNodes[t])})),a.remove(),e.insertBefore(o,e.childNodes[t])}a.value.length>=n&&(a.style.width=a.value.length+1+"ch")}))})),i}createSpacing(e){const t=document.createElement("div");return t.style.marginRight=e+"ch",t}renderParam(e,t,n,o,d,s=null){const a=3*e;0!==e&&(t.appendChild(document.createTextNode(",")),t.appendChild(this.createSpacing(n))),e+=1,t.appendChild(this.createFunctionHeaderTextEl(t,a,o,"par "+e,d,s))}renderFunctionBox(e,t,n){const o=document.createElement("div");o.classList.add("input-group","fixedHeight","func-box-header","padding"),o.style.display="flex",o.style.flexDirection="row",o.style.paddingTop="6.5px";const d=document.createElement("div");d.classList.add("input-group"),d.style.display="flex",d.style.flexDirection="row",d.style.flex="0 0 1ch";let s=0;for(const t of n)this.renderParam(s,d,1,5,e,t.parName),s+=1;const a=document.createElement("button");a.classList.add("add-function-param-btn"),a.innerHTML="+",a.addEventListener("click",(()=>{a.remove();const t=document.getElementsByClassName("function-elem").length-1;this.renderParam(t,d,1,5,e)})),o.addEventListener("mouseover",(()=>{d.appendChild(a)})),o.addEventListener("mouseleave",(()=>{a.remove()})),o.appendChild(document.createTextNode("function")),o.appendChild(this.createSpacing(2)),o.appendChild(this.createFunctionHeaderTextEl(o,2,15,"func name",e,t)),o.appendChild(document.createTextNode("(")),o.appendChild(d),o.appendChild(document.createTextNode(")")),o.appendChild(this.createSpacing(1)),o.appendChild(document.createTextNode("{"));const i=document.createElement("div");return i.style.marginRight="auto",o.appendChild(i),o}renderElement(t,n,o,d=!1){const a=[];if(null===t)return a;{null!==this.presenter.getMoveId()&&t.id===this.presenter.getMoveId()&&(n=!0,o=!0);const i=document.createElement("div");switch(t.id&&(i.id=t.id),i.classList.add("vcontainer","frameTopLeft","columnAuto"),i.style.backgroundColor=e.get()[t.type].color,t.type){case"InsertNode":if(n)return this.renderElement(t.followElement,!1,!1);if(o)return this.renderElement(t.followElement,!1,!0);if(this.presenter.getInsertMode()){if(this.presenter.getSettingFunctionMode()){if(d){const e=document.createElement("div");if(e.classList.add("container","fixedHalfHeight","symbol","hand","text-center"),i.addEventListener("dragover",(function(e){e.preventDefault()})),i.addEventListener("drop",(e=>{e.preventDefault(),this.presenter.appendElement(t.id)})),i.addEventListener("click",(()=>this.presenter.appendElement(t.id))),this.presenter.getMoveId()&&t.followElement&&t.followElement.id===this.presenter.getMoveId()){const t=document.createElement("strong");t.classList.add("moveText"),t.appendChild(document.createTextNode("Verschieben abbrechen")),e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("insertIcon","symbolHeight"),e.appendChild(t)}return i.appendChild(e),a.push(i),null===t.followElement||"Placeholder"===t.followElement.type?a:a.concat(this.renderElement(t.followElement,!1,o))}return this.renderElement(t.followElement,!1,o)}{const e=document.createElement("div");if(e.classList.add("container","fixedHalfHeight","symbol","hand","text-center"),i.addEventListener("dragover",(function(e){e.preventDefault()})),i.addEventListener("drop",(e=>{e.preventDefault(),this.presenter.appendElement(t.id)})),i.addEventListener("click",(()=>this.presenter.appendElement(t.id))),this.presenter.getMoveId()&&t.followElement&&t.followElement.id===this.presenter.getMoveId()){const t=document.createElement("strong");t.classList.add("moveText"),t.appendChild(document.createTextNode("Verschieben abbrechen")),e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("insertIcon","symbolHeight"),e.appendChild(t)}return i.appendChild(e),a.push(i),null===t.followElement||"Placeholder"===t.followElement.type?a:a.concat(this.renderElement(t.followElement,!1,o))}}return this.renderElement(t.followElement,n,o);case"Placeholder":{const e=document.createElement("div");e.classList.add("container","fixedHeight");const t=document.createElement("div");return t.classList.add("placeholder","symbolHeight","symbol"),e.appendChild(t),i.appendChild(e),a.push(i),a}case"InsertCase":{i.classList.remove("frameTopLeft","columnAuto"),i.classList.add("frameLeft","fixedHeight");const e=document.createElement("div");e.classList.add("fixedHeight","container");const d=this.createTextDiv(t.type,t.text,t.id),s=this.createOptionDiv(t.type,t.id);return e.appendChild(d),e.appendChild(s),i.appendChild(e),a.push(i),a.concat(this.renderElement(t.followElement,n,o))}case"InputNode":case"OutputNode":case"TaskNode":{const e=document.createElement("div");e.classList.add("fixedHeight","container");const d=this.createTextDiv(t.type,t.text,t.id),s=this.createOptionDiv(t.type,t.id);return e.appendChild(d),e.appendChild(s),i.appendChild(e),a.push(i),a.concat(this.renderElement(t.followElement,n,o))}case"BranchNode":{const e=document.createElement("div");e.classList.add("columnAuto","vcontainer");const d=document.createElement("div");d.classList.add("branchSplit","vcontainer","fixedDoubleHeight");const s=document.createElement("div");s.classList.add("fixedHeight","container");const l=this.createTextDiv(t.type,t.text,t.id),c=this.createOptionDiv(t.type,t.id);s.appendChild(l),s.appendChild(c);const r=document.createElement("div");r.classList.add("fixedHeight","container","padding");const p=document.createElement("div");p.classList.add("columnAuto","text-left","bottomHeader"),p.appendChild(document.createTextNode("Wahr"));const h=document.createElement("div");h.classList.add("columnAuto","text-right","bottomHeader"),h.appendChild(document.createTextNode("Falsch")),r.appendChild(p),r.appendChild(h),d.appendChild(s),d.appendChild(r),e.appendChild(d);const u=document.createElement("div");u.classList.add("columnAuto","branchCenter","container");const m=document.createElement("div");m.classList.add("columnAuto","vcontainer","ov-hidden");for(const e of this.renderElement(t.trueChild,!1,o))this.applyCodeEventListeners(e),m.appendChild(e);const f=document.createElement("div");f.classList.add("columnAuto","vcontainer","ov-hidden");for(const e of this.renderElement(t.falseChild,!1,o))this.applyCodeEventListeners(e),f.appendChild(e);return u.appendChild(m),u.appendChild(f),e.appendChild(u),i.appendChild(e),a.push(i),a.concat(this.renderElement(t.followElement,n,o))}case"TryCatchNode":{const e=s("div",["columnAuto","vcontainer","tryCatchNode"],i),d=s("div",["container","fixedHeight","padding"],e),l=this.createOptionDiv(t.type,t.id);d.appendChild(l),s("div",["symbol"],d).appendChild(document.createTextNode("Try"));const c=s("div",["columnAuto","container","loopShift"],e),r=s("div",["loopWidth","frameLeft","vcontainer"],c);for(const e of this.renderElement(t.tryChild,!1,o))this.applyCodeEventListeners(e),r.appendChild(e);const p=s("div",["container","columnAuto","loopShift"],e),h=s("div",["loopWidth","vcontainer"],p);s("div",["frameLeftBottom"],h).style.flex="0 0 3px";const u=s("div",["container","fixedHeight","padding","tryCatchNode"],e);s("div",["symbol"],u).appendChild(document.createTextNode("Catch"));const m=this.createTextDiv(t.type,t.text,t.id);u.appendChild(m);const f=s("div",["columnAuto","container","loopShift"],e),E=s("div",["loopWidth","frameLeft","vcontainer"],f);for(const e of this.renderElement(t.catchChild,!1,o))this.applyCodeEventListeners(e),E.appendChild(e);return a.push(i),a.concat(this.renderElement(t.followElement,n,o))}case"HeadLoopNode":case"CountLoopNode":{const e=document.createElement("div");e.classList.add("columnAuto","vcontainer");const d=document.createElement("div");d.classList.add("container","fixedHeight");const s=this.createTextDiv(t.type,t.text,t.id),l=this.createOptionDiv(t.type,t.id);d.appendChild(s),d.appendChild(l),e.appendChild(d);const c=document.createElement("div");c.classList.add("columnAuto","container","loopShift");const r=document.createElement("div");r.classList.add("loopWidth","frameLeft","vcontainer");for(const e of this.renderElement(t.child,!1,o))this.applyCodeEventListeners(e),r.appendChild(e);return c.appendChild(r),e.appendChild(c),i.appendChild(e),a.push(i),a.concat(this.renderElement(t.followElement,n,o))}case"FunctionNode":{const e=document.createElement("div");e.classList.add("columnAuto","vcontainer");const d=this.renderFunctionBox(t.id,t.text,t.parameters),s=document.createElement("div");s.classList.add("container","fixedHeight");const l=this.createOptionDiv(t.type,t.id);s.appendChild(l),d.appendChild(s);const c=document.createElement("div");c.classList.add("columnAuto","container","loopShift");const r=document.createElement("div");r.classList.add("loopWidth","frameLeft","vcontainer");for(const e of this.renderElement(t.child,!1,o))this.applyCodeEventListeners(e),r.appendChild(e);c.appendChild(r);const p=document.createElement("div");p.classList.add("container","fixedHeight","padding");const h=document.createElement("div");h.classList.add("symbol"),h.appendChild(document.createTextNode("}")),p.appendChild(h);const u=document.createElement("div");u.classList.add("frameLeftBottom"),u.style.flex="0 0 3px";const m=document.createElement("div");m.classList.add("container","columnAuto","loopShift");const f=document.createElement("div");return f.classList.add("loopWidth","vcontainer"),f.appendChild(u),m.appendChild(f),e.appendChild(d),e.appendChild(c),e.appendChild(m),e.appendChild(p),i.appendChild(e),a.push(i),a.concat(this.renderElement(t.followElement,n,o))}case"FootLoopNode":{const e=document.createElement("div");e.classList.add("columnAuto","vcontainer");const d=document.createElement("div");d.classList.add("columnAuto","container","loopShift");const s=document.createElement("div");s.classList.add("loopWidth","frameLeftBottom","vcontainer");for(const e of this.renderElement(t.child,!1,o))this.applyCodeEventListeners(e),s.appendChild(e);const l=document.createElement("div");l.classList.add("borderHeight"),s.appendChild(l),d.appendChild(s),e.appendChild(d);const c=document.createElement("div");c.classList.add("container","fixedHeight");const r=this.createTextDiv(t.type,t.text,t.id),p=this.createOptionDiv(t.type,t.id);return c.appendChild(r),c.appendChild(p),e.appendChild(c),i.appendChild(e),a.push(i),a.concat(this.renderElement(t.followElement,n,o))}case"CaseNode":{const e=document.createElement("div");e.classList.add("columnAuto","vcontainer");const d=document.createElement("div");d.classList.add("vcontainer","fixedHeight"),t.defaultOn?d.classList.add("caseHead-"+t.cases.length):d.classList.add("caseHead-noDefault-"+t.cases.length),d.style.backgroundPosition="1px 0px";let s=t.cases.length;t.defaultOn||(s+=2);const l=this.createTextDiv(t.type,t.text,t.id,s),c=this.createOptionDiv(t.type,t.id);d.appendChild(l),d.appendChild(c),e.appendChild(d);const r=document.createElement("div");if(r.classList.add("columnAuto","container"),t.defaultOn)r.classList.add("caseBody-"+t.cases.length);else{const e=t.cases.length-1;r.classList.add("caseBody-"+e)}for(const e of t.cases){const t=document.createElement("div");t.classList.add("columnAuto","vcontainer","ov-hidden");for(const n of this.renderElement(e,!1,o))this.applyCodeEventListeners(n),t.appendChild(n);r.appendChild(t)}if(t.defaultOn){const e=document.createElement("div");e.classList.add("columnAuto","vcontainer","ov-hidden");for(const n of this.renderElement(t.defaultNode,!1,o))this.applyCodeEventListeners(n),e.appendChild(n);r.appendChild(e)}return e.appendChild(r),i.appendChild(e),a.push(i),a.concat(this.renderElement(t.followElement,n,o))}}}}resetButtons(){for(const t of this.buttonList)e.get()[t].use&&document.getElementById(e.get()[t].id).classList.remove("boldText")}increaseSize(){if(this.size<10){const e=document.getElementById("Sizelimiter");e.classList.remove("col-"+this.size),this.size=this.size+1,e.classList.add("col-"+this.size)}}decreaseSize(){if(this.size>6){const e=document.getElementById("Sizelimiter");e.classList.remove("col-"+this.size),this.size=this.size-1,e.classList.add("col-"+this.size)}}addCssWrapper(e,t,n){const o=document.createElement("div");o.classList.add("column"),o.classList.add("col-12"),o.classList.add("lineTop");const d=document.createElement("div");return d.classList.add("row"),t&&(d.classList.add("bg-secondary"),d.classList.add("simpleBorder")),n&&(d.classList.add("bg-primary"),d.classList.add("simpleBorder")),o.appendChild(e),d.appendChild(o),d}openCaseOptions(t){const n=document.getElementById("modal-content"),o=document.getElementById("modal-footer");for(;n.hasChildNodes();)n.removeChild(n.lastChild);for(;o.hasChildNodes();)o.removeChild(o.lastChild);const d=this.presenter.getElementByUid(t),s=document.createElement("strong");s.appendChild(document.createTextNode("Einstellungen der "+e.get().CaseNode.text+": ")),n.appendChild(s);const a=document.createElement("div");a.classList.add("caseTitle","boldText"),a.appendChild(document.createTextNode(d.text)),n.appendChild(a);const i=document.createElement("dl");i.classList.add("container"),n.appendChild(i);const l=document.createElement("dt");l.classList.add("dtItem"),l.appendChild(document.createTextNode("Anzahl der Fälle:")),i.appendChild(l);const c=document.createElement("dd");c.classList.add("ddItem","container"),i.appendChild(c);const r=document.createElement("div");r.classList.add("text-center","shortenOnMobile"),r.appendChild(document.createTextNode(d.cases.length)),c.appendChild(r);const p=document.createElement("div");p.classList.add("addCaseIcon","hand","caseOptionsIcons","tooltip","tooltip-bottom"),p.addEventListener("click",(()=>{this.presenter.addCase(t),this.openCaseOptions(t)})),p.setAttribute("data-tooltip","Fall hinzufügen"),c.appendChild(p);const h=document.createElement("dt");h.classList.add("dtItem"),h.appendChild(document.createTextNode("Sonst Zweig einschalten:")),i.appendChild(h);const u=document.createElement("dd");u.classList.add("ddItem","container"),u.addEventListener("click",(()=>{this.presenter.switchDefaultState(t),this.openCaseOptions(t)})),i.appendChild(u);const m=document.createElement("div");m.classList.add("text-center","shortenOnMobile"),m.setAttribute("data-abbr","N"),u.appendChild(m);const f=document.createElement("span");f.appendChild(document.createTextNode("Nein")),m.appendChild(f);const E=document.createElement("div");E.classList.add("hand","caseOptionsIcons"),d.defaultOn?E.classList.add("switchOn"):E.classList.add("switchOff"),u.appendChild(E);const C=document.createElement("div");C.classList.add("text-center","shortenOnMobile"),C.setAttribute("data-abbr","J"),u.appendChild(C);const g=document.createElement("span");g.appendChild(document.createTextNode("Ja")),C.appendChild(g);const L=document.createElement("div");L.classList.add("modal-buttons","hand"),L.appendChild(document.createTextNode("Schließen")),L.addEventListener("click",(()=>document.getElementById("IEModal").classList.remove("active"))),o.appendChild(L),document.getElementById("IEModal").classList.add("active")}createOptionDiv(e,t){const n=document.createElement("div");if(n.classList.add("optionContainer"),"CaseNode"===e){const e=document.createElement("div");e.classList.add("gearIcon","optionIcon","hand","tooltip","tooltip-bottoml"),e.setAttribute("data-tooltip","Einstellung"),e.addEventListener("click",(()=>this.openCaseOptions(t))),n.appendChild(e)}if("InsertCase"!==e&&"FunctionNode"!==e){const e=document.createElement("div");e.classList.add("moveIcon"),e.classList.add("optionIcon"),e.classList.add("hand"),e.classList.add("tooltip"),e.classList.add("tooltip-bottoml"),e.setAttribute("data-tooltip","Verschieben"),e.addEventListener("click",(()=>this.presenter.moveElement(t))),n.appendChild(e)}const o=document.createElement("div");return o.classList.add("trashcan"),o.classList.add("optionIcon"),o.classList.add("hand"),o.classList.add("tooltip"),o.classList.add("tooltip-bottoml"),o.setAttribute("data-tooltip","Entfernen"),o.addEventListener("click",(()=>this.presenter.removeElement(t))),n.appendChild(o),n}createTextDiv(e,t,n,o=null){const d=document.createElement("div");d.classList.add("columnAuto","symbol");const s=document.createElement("div");s.classList.add("input-group","editField"),s.style.display="none","FootLoopNode"===e&&s.classList.add(n);const a=document.createElement("input");a.type="text",a.value=t,a.addEventListener("keyup",(e=>{13===e.keyCode&&this.presenter.editElement(n,a.value),27===e.keyCode&&this.presenter.renderAllViews()}));const i=document.createElement("div");i.classList.add("acceptIcon","hand"),i.addEventListener("click",(()=>this.presenter.editElement(n,a.value)));const l=document.createElement("div");switch(l.classList.add("deleteIcon","hand"),l.addEventListener("click",(()=>this.presenter.renderAllViews())),e){case"InputNode":t="E: "+t;break;case"OutputNode":t="A: "+t;break;case"BranchNode":case"InsertCase":d.classList.add("text-center")}const c=document.createElement("div");"InsertCase"===e&&"Sonst"===t||(c.classList.add("padding"),this.presenter.getInsertMode()||c.classList.add("hand","fullHeight"),c.addEventListener("click",(()=>{this.presenter.renderAllViews(),this.presenter.switchEditState(n)})));const r=document.createElement("span");"CaseNode"===e&&(r.style.marginLeft="calc("+o/(o+1)*100+"% - 2em)");const p=document.createTextNode(t);return s.appendChild(a),s.appendChild(i),s.appendChild(l),r.appendChild(p),c.appendChild(r),d.appendChild(c),d.appendChild(s),d}applyCodeEventListeners(e){e.firstChild.classList.contains("func-box-header")||(e.firstChild.firstChild.classList.contains("loopShift")?(e.firstChild.lastChild.addEventListener("mouseover",(function(){const t=document.getElementById(e.id+"-codeLine");t&&t.classList.add("highlight")})),e.firstChild.lastChild.addEventListener("mouseout",(function(){const t=document.getElementById(e.id+"-codeLine");t&&t.classList.remove("highlight")}))):(e.firstChild.firstChild.addEventListener("mouseover",(function(){const t=document.getElementById(e.id+"-codeLine");t&&t.classList.add("highlight")})),e.firstChild.firstChild.addEventListener("mouseout",(function(){const t=document.getElementById(e.id+"-codeLine");t&&t.classList.remove("highlight")}))))}prepareRenderTree(e,t,n){if(null===e||"InsertNode"===e.type&&null===e.followElement&&!this.presenter.getInsertMode())return document.createTextNode("");{const o=document.createElement("div");o.classList.add("column"),o.classList.add("col-12");const d=document.createElement("div");return d.classList.add("columns"),"InsertCase"!==e.type&&d.classList.add("lineTop"),this.renderTree(e,t,n).forEach((function(e){o.appendChild(e)})),d.appendChild(o),d}}renderTree(e,t,n){if(null===e)return[];switch(null!==this.presenter.getMoveId()&&e.id===this.presenter.getMoveId()&&(t=!0,n=!0),e.type){case"InsertNode":if(t)return this.renderTree(e.followElement,!1,!1);if(n)return this.renderTree(e.followElement,!1,!0);if(this.presenter.getInsertMode()){const o=document.createElement("div");o.id=e.id,o.addEventListener("dragover",(function(e){e.preventDefault()})),o.addEventListener("drop",(()=>this.presenter.appendElement(e.id))),o.addEventListener("click",(()=>this.presenter.appendElement(e.id)));const d=document.createElement("div");if(this.presenter.getMoveId()&&e.followElement&&e.followElement.id===this.presenter.getMoveId()){const e=document.createElement("strong");e.appendChild(document.createTextNode("Verschieben abbrechen")),d.appendChild(e)}else d.classList.add("insertIcon");return o.appendChild(d),null===e.followElement||"Placeholder"===e.followElement.type?[this.addCssWrapper(o,!0,t)]:[this.addCssWrapper(o,!0,t),this.prepareRenderTree(e.followElement,!1,n)]}return this.renderTree(e.followElement,t,n);case"Placeholder":if(this.presenter.getInsertMode())return[];{const e=document.createElement("div");e.classList.add("text-center");const t=document.createElement("div");return t.classList.add("emptyStateIcon"),t.classList.add("p-centered"),e.appendChild(t),[e]}case"InputNode":case"OutputNode":case"TaskNode":{const o=document.createElement("div");o.id=e.id,o.classList.add("columns"),o.classList.add("element");const d=this.createTextDiv(e.type,e.text,e.id),s=this.createOptionDiv(e.type,e.id);return o.appendChild(d),o.appendChild(s),[this.addCssWrapper(o,!1,t),this.prepareRenderTree(e.followElement,t,n)]}case"FunctionNode":{const o=document.createElement("div");o.id=e.id,o.classList.add(["columns","element"]);const d=this.createOptionDiv(e.type,e.id);return o.appendChild(d),[this.addCssWrapper(o,!1,t),this.prepareRenderTree(e.followElement,t,n)]}case"BranchNode":{const o=document.createElement("div");o.id=e.id;const d=document.createElement("div");d.classList.add("columns"),d.classList.add("element"),d.classList.add("stBranch");const s=this.createTextDiv(e.type,e.text,e.id),a=this.createOptionDiv(e.type,e.id),i=document.createElement("div");i.classList.add("column"),i.classList.add("col-1"),d.appendChild(i),d.appendChild(s),d.appendChild(a);const l=document.createElement("div");l.classList.add("column"),l.classList.add("col-12");const c=document.createElement("div");c.classList.add("columns");const r=document.createElement("div");r.classList.add("column"),r.classList.add("col-6"),r.appendChild(document.createTextNode("Wahr"));const p=document.createElement("div");p.classList.add("column"),p.classList.add("col-6"),p.classList.add("text-right"),p.appendChild(document.createTextNode("Falsch")),c.appendChild(r),c.appendChild(p),l.appendChild(c),d.appendChild(l);const h=document.createElement("div");h.classList.add("column"),h.classList.add("col-6"),h.appendChild(this.prepareRenderTree(e.trueChild,!1,n));const u=document.createElement("div");u.classList.add("column"),u.classList.add("col-6"),u.appendChild(this.prepareRenderTree(e.falseChild,!1,n));const m=document.createElement("div");return m.classList.add("columns"),m.classList.add("middleBranch"),m.appendChild(h),m.appendChild(u),o.appendChild(d),o.appendChild(m),[this.addCssWrapper(o,!1,t),this.prepareRenderTree(e.followElement,t,n)]}case"HeadLoopNode":case"CountLoopNode":{const o=document.createElement("div");o.id=e.id;const d=document.createElement("div");d.classList.add("columns"),d.classList.add("element");const s=this.createTextDiv(e.type,e.text,e.id),a=this.createOptionDiv(e.type,e.id);d.appendChild(s),d.appendChild(a);const i=document.createElement("div");i.classList.add("column"),i.classList.add("col-12"),i.appendChild(this.prepareRenderTree(e.child,!1,n));const l=document.createElement("div");l.classList.add("columns"),l.appendChild(i);const c=document.createElement("div");c.classList.add("column"),c.classList.add("col-11"),c.classList.add("col-ml-auto"),c.classList.add("lineLeft"),c.appendChild(l);const r=document.createElement("div");return r.classList.add("columns"),r.appendChild(c),o.appendChild(d),o.appendChild(r),[this.addCssWrapper(o,!1,t),this.prepareRenderTree(e.followElement,t,n)]}case"FootLoopNode":{const o=document.createElement("div");o.id=e.id;const d=document.createElement("div");d.classList.add("columns"),d.classList.add("element"),d.classList.add("lineTopFootLoop");const s=this.createTextDiv(e.type,e.text,e.id),a=this.createOptionDiv(e.type,e.id);d.appendChild(s),d.appendChild(a);const i=document.createElement("div");i.classList.add("column"),i.classList.add("col-11"),i.classList.add("col-ml-auto"),i.classList.add("lineLeft"),i.appendChild(this.prepareRenderTree(e.child,!1,n));const l=document.createElement("div");return l.classList.add("columns"),l.appendChild(i),o.appendChild(l),o.appendChild(d),[this.addCssWrapper(o,!1,t),this.prepareRenderTree(e.followElement,t,n)]}case"CaseNode":{const o=document.createElement("div");o.id=e.id;const d=document.createElement("div");d.classList.add("columns"),d.classList.add("element"),e.defaultOn?d.classList.add("caseHead-"+e.cases.length):d.classList.add("caseHead-noDefault-"+e.cases.length);const s=this.createTextDiv(e.type,e.text,e.id),a=this.createOptionDiv(e.type,e.id),i=document.createElement("div");i.classList.add("column"),i.classList.add("col-1"),d.appendChild(i),d.appendChild(s),d.appendChild(a);const l=document.createElement("div");l.classList.add("column"),l.classList.add("col-12");const c=document.createElement("div");if(c.classList.add("columns"),e.defaultOn)c.classList.add("caseBody-"+e.cases.length);else{const t=e.cases.length-1;c.classList.add("caseBody-"+t)}for(const t of e.cases){const e=document.createElement("div");e.classList.add("column"),e.appendChild(this.prepareRenderTree(t,!1,n)),c.appendChild(e)}if(e.defaultOn){const t=document.createElement("div");t.classList.add("column"),t.appendChild(this.prepareRenderTree(e.defaultNode,!1,n)),c.appendChild(t)}return o.appendChild(d),o.appendChild(c),[this.addCssWrapper(o,!1,t),this.prepareRenderTree(e.followElement,t,n)]}case"InsertCase":{const o=document.createElement("div");o.id=e.id,o.classList.add("columns"),o.classList.add("element");const d=document.createElement("div");d.classList.add("column"),d.classList.add("col-1");const s=this.createTextDiv(e.type,e.text,e.id),a=this.createOptionDiv(e.type,e.id);return o.appendChild(d),o.appendChild(s),o.appendChild(a),[o,this.prepareRenderTree(e.followElement,t,n)]}default:return this.renderTree(e.followElement,t,n)}}displaySourcecode(e){}setLang(){}}class i{constructor(e,t){this.presenter=e,this.domRoot=t,this.lang="--",this.translationMap={Python:{untranslatable:[],InputNode:{pre:"",post:' = input("Eingabe")\n'},OutputNode:{pre:"print(",post:")\n"},TaskNode:{pre:"",post:"\n"},BranchNode:{pre:"if ",post:":\n",between:"else:\n"},TryCatchNode:{pre:"try:\n",between:"except",post:":\n"},CountLoopNode:{pre:"for ",post:":\n"},HeadLoopNode:{pre:"while ",post:":\n"},FunctionNode:{pre:"def ",between:"(",post:"):\n"},FootLoopNode:{prepre:"while True:\n",pre:"    if not ",post:":\n        break\n"},CaseNode:{pre:"if ",post:":\n"},InsertCase:{preNormal:"elif ",preDefault:"default",post:":\n",postpost:"\n"},leftBracket:"",rightBracket:"",pseudoSwitch:!0},"Python ab v3.10":{untranslatable:[],InputNode:{pre:"",post:' = input("Eingabe")\n'},OutputNode:{pre:"print(",post:")\n"},TaskNode:{pre:"",post:"\n"},BranchNode:{pre:"if ",post:":\n",between:"else:\n"},TryCatchNode:{pre:"try:\n",between:"except",post:":\n"},CountLoopNode:{pre:"for ",post:":\n"},HeadLoopNode:{pre:"while ",post:":\n"},FunctionNode:{pre:"def ",between:"(",post:"):\n"},FootLoopNode:{prepre:"while True:\n",pre:"    if not ",post:":\n        break\n"},CaseNode:{pre:"match ",post:":\n"},InsertCase:{preNormal:"case ",preDefault:"case _",post:":\n",postpost:"\n"},leftBracket:"",rightBracket:"",pseudoSwitch:!1},PHP:{untranslatable:[],InputNode:{pre:"",post:' = readline("Eingabe");\n'},OutputNode:{pre:"echo ",post:";\n"},TaskNode:{pre:"",post:";\n"},BranchNode:{pre:"if (",post:")\n",between:"} else {\n"},TryCatchNode:{pre:"try\n",between:"catch (",post:")\n"},CountLoopNode:{pre:"for (",post:")\n"},HeadLoopNode:{pre:"while (",post:")\n"},FootLoopNode:{prepre:"do\n",pre:"while (",post:");\n"},FunctionNode:{pre:"def ",between:"(",post:"):\n"},CaseNode:{pre:"switch (",post:")\n"},InsertCase:{preNormal:"case ",preDefault:"default",post:":\n",postpost:"break;\n"},leftBracket:"{",rightBracket:"}",pseudoSwitch:!1},Java:{untranslatable:[],InputNode:{pre:"",post:" = System.console().readLine();\n"},OutputNode:{pre:"System.out.println(",post:");\n"},TaskNode:{pre:"",post:";\n"},BranchNode:{pre:"if (",post:")\n",between:"} else {\n"},TryCatchNode:{pre:"try\n",between:"catch (",post:")\n"},CountLoopNode:{pre:"for (",post:")\n"},HeadLoopNode:{pre:"while (",post:")\n"},FootLoopNode:{prepre:"do\n",pre:"while (",post:");\n"},FunctionNode:{pre:"public void ",between:"(",post:")\n"},CaseNode:{pre:"switch (",post:")\n"},InsertCase:{preNormal:"case ",preDefault:"default",post:":\n",postpost:"break;\n"},leftBracket:"{",rightBracket:"}",pseudoSwitch:!1}},this.preRender()}preRender(){const e=document.getElementById("SourcecodeDisplay"),t=document.createElement("div");t.classList.add("fixFullWidth","margin-top-small");const n=document.createElement("div");n.classList.add("columnAuto","container");const o=document.createElement("strong");o.classList.add("center"),o.appendChild(document.createTextNode("Übersetzen in:"));const d=document.createElement("div");d.classList.add("center");const s=document.createElement("select");s.classList.add("form-select"),s.id="SourcecodeSelect",s.addEventListener("change",(e=>this.presenter.startTransforming(e)));const a=document.createElement("option");a.value="--",a.appendChild(document.createTextNode("--")),s.appendChild(a);for(const e in this.translationMap){const t=document.createElement("option");t.value=e,t.appendChild(document.createTextNode(e)),s.appendChild(t)}const i=document.createElement("div");i.setAttribute("data-tooltip","Kopiere Code"),i.classList.add("center","copyIcon","struktoOption","sourcecodeHeader","hand","tooltip"),e.addEventListener("click",(function(e){navigator.clipboard.writeText(localStorage.getItem("struktog_code"))})),d.appendChild(s),n.appendChild(o),n.appendChild(d),n.appendChild(i);const l=document.createElement("div");if(l.classList.add("columnAuto"),l.id="Sourcecode",t.appendChild(n),t.appendChild(l),e.appendChild(t),this.domRoot=document.getElementById("Sourcecode"),this.generateCodeSwitch(this.presenter,document.getElementById("struktoOptions1")),this.generateCodeSwitch(this.presenter,document.getElementById("struktoOptions2")),"undefined"!=typeof Storage&&"displaySourcecode"in localStorage&&"lang"in localStorage){const e=localStorage.lang;e in this.translationMap&&(this.lang=e,s.value=this.lang,this.presenter.setSourcecodeDisplay(JSON.parse(localStorage.displaySourcecode)),this.displaySourcecode("ToggleSourcecode"))}}render(e){for(;this.domRoot.hasChildNodes();)this.domRoot.removeChild(this.domRoot.lastChild);if("--"!==this.lang){let t=!1;for(const n of this.translationMap[this.lang].untranslatable)t=t||this.checkForUntranslatable(e,n);const n=document.createElement("pre");n.classList.add("code"),n.setAttribute("data-lang",this.lang);const o=document.createElement("code");let d="";t?o.appendChild(document.createTextNode("Das Struktogramm enthält Elemente, \nwelche in der gewählten Programmiersprache \nnicht direkt zur Verfügung stehen.\nDeshalb bitte manuell in Code überführen.")):this.transformToCode(e,0,this.lang).forEach((function(e){o.appendChild(e),d+=e.textContent})),localStorage.setItem("struktog_code",d),n.appendChild(o),this.domRoot.appendChild(n)}}generateCodeSwitch(e,t){const n=document.createElement("div");n.classList.add("struktoOption","codeIcon","tooltip","tooltip-bottomCode","hand","ToggleSourcecode"),n.setAttribute("data-tooltip","Quellcode einblenden"),n.addEventListener("click",(t=>e.alterSourcecodeDisplay(t))),t.appendChild(n)}setLang(e){"undefined"!=typeof Storage&&(localStorage.lang=e,localStorage.displaySourcecode=!0),this.lang=e}resetButtons(){}addIndentations(e){let t="";for(let n=0;n<e;n++)t+="    ";return t}createHighlightedSpan(e){const t=document.createElement("span");return t.classList.add("text-code"),t.appendChild(document.createTextNode(e)),t}checkForUntranslatable(e,t){if("Placeholder"===e.type||"InsertNode"===e.type&&null===e.followElement)return!1;if(e.type===t)return!0;switch(e.type){case"InsertNode":case"InputNode":case"OutputNode":case"TaskNode":return this.checkForUntranslatable(e.followElement,t);case"BranchNode":return this.checkForUntranslatable(e.trueChild,t)||this.checkForUntranslatable(e.falseChild,t)||this.checkForUntranslatable(e.followElement,t);case"TryCatchNode":return this.checkForUntranslatable(e.tryChild,t)||this.checkForUntranslatable(e.catchChild,t)||this.checkForUntranslatable(e.followElement,t);case"CountLoopNode":case"HeadLoopNode":case"FootLoopNode":case"FunctionNode":return this.checkForUntranslatable(e.child,t)||this.checkForUntranslatable(e.followElement,t);case"CaseNode":{let n=!1;for(let o=0;o<e.length;o++)n=n||this.checkForUntranslatable(e.cases[o],t);return n=n||this.checkForUntranslatable(e.defaultNode,t),n||this.checkForUntranslatable(e.followElement,t)}}}transformToCode(e,t,n,o=!1){if("Placeholder"===e.type||"InsertNode"===e.type&&null===e.followElement)return[];{const d=document.createElement("span");d.id=e.id+"-codeLine",d.addEventListener("mouseover",(function(){document.getElementById(e.id).firstChild.classList.add("highlight")})),d.addEventListener("mouseout",(function(){document.getElementById(e.id).firstChild.classList.remove("highlight")}));const a=this.createHighlightedSpan(e.text);switch(a.classList.add("hand"),a.addEventListener("click",(()=>this.presenter.switchEditState(e.id))),e.type){case"InsertNode":return this.transformToCode(e.followElement,t,n);case"InputNode":{const o=document.createElement("span");o.classList.add("keyword"),o.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].InputNode.pre)),d.appendChild(o),d.appendChild(a);const s=document.createElement("span");return s.classList.add("keyword"),s.appendChild(document.createTextNode(this.translationMap[n].InputNode.post)),d.appendChild(s),[d].concat(this.transformToCode(e.followElement,t,n))}case"OutputNode":{const o=document.createElement("span");o.classList.add("keyword"),o.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].OutputNode.pre)),d.appendChild(o),d.appendChild(a);const s=document.createElement("span");return s.classList.add("keyword"),s.appendChild(document.createTextNode(this.translationMap[n].OutputNode.post)),d.appendChild(s),[d].concat(this.transformToCode(e.followElement,t,n))}case"TaskNode":{const o=document.createElement("span");o.classList.add("keyword"),o.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].TaskNode.pre)),d.appendChild(o),d.appendChild(a);const s=document.createElement("span");return s.classList.add("keyword"),s.appendChild(document.createTextNode(this.translationMap[n].TaskNode.post)),d.appendChild(s),[d].concat(this.transformToCode(e.followElement,t,n))}case"BranchNode":{const o=document.createElement("span");o.classList.add("keyword"),o.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].BranchNode.pre)),d.appendChild(o),d.appendChild(a);const s=document.createElement("span");s.classList.add("keyword"),s.appendChild(document.createTextNode(this.translationMap[n].BranchNode.post)),d.appendChild(s);let i=[d];if(""!==this.translationMap[n].leftBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].leftBracket+"\n")),i.push(e)}const l=this.transformToCode(e.trueChild,t+1,n),c=this.transformToCode(e.falseChild,t+1,n);if(i=i.concat(l),c.length>0){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].BranchNode.between)),i.push(e)}if(i=i.concat(c),""!==this.translationMap[n].rightBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].rightBracket+"\n")),i.push(e)}return i.concat(this.transformToCode(e.followElement,t,n))}case"TryCatchNode":{s("span",["keyword"],d).appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].TryCatchNode.pre));let o=[d];if(""!==this.translationMap[n].leftBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].leftBracket+"\n")),o.push(e)}const i=this.transformToCode(e.tryChild,t+1,n);if(o=o.concat(i),""!==this.translationMap[n].rightBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].rightBracket+"\n")),o.push(e)}const l=s("span",["keyword"]);l.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].TryCatchNode.between)),""!==a.innerText&&n.includes("Python")&&l.appendChild(document.createTextNode(" ")),l.appendChild(a),o.push(l);const c=s("span",["keyword"]);c.appendChild(document.createTextNode(this.translationMap[n].TryCatchNode.post)),o.push(c);const r=this.transformToCode(e.catchChild,t+1,n);if(""!==this.translationMap[n].leftBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].leftBracket+"\n")),o.push(e)}if(o=o.concat(r),""!==this.translationMap[n].rightBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].rightBracket+"\n")),o.push(e)}return o.concat(this.transformToCode(e.followElement,t,n))}case"CountLoopNode":{const o=document.createElement("span");o.classList.add("keyword"),o.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].CountLoopNode.pre)),d.appendChild(o),d.appendChild(a);const s=document.createElement("span");s.classList.add("keyword"),s.appendChild(document.createTextNode(this.translationMap[n].CountLoopNode.post)),d.appendChild(s);let i=[d];if(""!==this.translationMap[n].leftBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].leftBracket+"\n")),i.push(e)}if(i=i.concat(this.transformToCode(e.child,t+1,n)),""!==this.translationMap[n].rightBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].rightBracket+"\n")),i.push(e)}return i.concat(this.transformToCode(e.followElement,t,n))}case"HeadLoopNode":{const o=document.createElement("span");o.classList.add("keyword"),o.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].HeadLoopNode.pre)),d.appendChild(o),d.appendChild(a);const s=document.createElement("span");s.classList.add("keyword"),s.appendChild(document.createTextNode(this.translationMap[n].HeadLoopNode.post)),d.appendChild(s);let i=[d];if(""!==this.translationMap[n].leftBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].leftBracket+"\n")),i.push(e)}if(i=i.concat(this.transformToCode(e.child,t+1,n)),""!==this.translationMap[n].rightBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].rightBracket+"\n")),i.push(e)}return i.concat(this.transformToCode(e.followElement,t,n))}case"FootLoopNode":{const o=document.createElement("span");o.classList.add("keyword"),o.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].FootLoopNode.prepre)),d.appendChild(o);let s=[d];if(""!==this.translationMap[n].leftBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].leftBracket+"\n")),s.push(e)}const i=this.transformToCode(e.child,t+1,n);if(s=s.concat(i),""!==this.translationMap[n].rightBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].rightBracket+"\n")),s.push(e)}const l=document.createElement("span");l.id=e.id+"-codeLine",d.id="";const c=document.createElement("span");c.classList.add("keyword"),c.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].FootLoopNode.pre)),l.appendChild(c),l.appendChild(a);const r=document.createElement("span");return r.classList.add("keyword"),r.appendChild(document.createTextNode(this.translationMap[n].FootLoopNode.post)),l.appendChild(r),l.addEventListener("mouseover",(function(){document.getElementById(e.id).firstChild.classList.add("highlight")})),l.addEventListener("mouseout",(function(){document.getElementById(e.id).firstChild.classList.remove("highlight")})),s.push(l),s.concat(this.transformToCode(e.followElement,t,n))}case"FunctionNode":{const o=document.createElement("span");o.classList.add("keyword"),o.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].FunctionNode.pre)),d.appendChild(o),d.appendChild(a);const s=document.createElement("span");s.classList.add("keyword"),s.appendChild(document.createTextNode(this.translationMap[n].FunctionNode.between)),d.appendChild(s);const i=e.parameters;let l=0;for(const t of i){0!==l&&d.appendChild(this.createHighlightedSpan(", "));const n=this.createHighlightedSpan(t.parName);n.classList.add("hand"),n.addEventListener("click",(()=>this.presenter.switchEditState(e.id,t.pos/3*2))),d.appendChild(n),l+=1}const c=document.createElement("span");c.classList.add("keyword"),c.appendChild(document.createTextNode(this.translationMap[n].FunctionNode.post)),d.appendChild(c);let r=[d];if(""!==this.translationMap[n].leftBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].leftBracket+"\n")),r.push(e)}if(r=r.concat(this.transformToCode(e.child,t+1,n)),""!==this.translationMap[n].rightBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].rightBracket+"\n")),r.push(e)}return r.concat(this.transformToCode(e.followElement,t,n))}case"CaseNode":{if(!this.translationMap[n].pseudoSwitch){const e=document.createElement("span");e.classList.add("keyword"),e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].CaseNode.pre)),d.appendChild(e),d.appendChild(a);const o=document.createElement("span");o.classList.add("keyword"),o.appendChild(document.createTextNode(this.translationMap[n].CaseNode.post)),d.appendChild(o)}let o=[d];if(this.translationMap[n].pseudoSwitch&&(o=[]),""!==this.translationMap[n].leftBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].leftBracket+"\n")),o.push(e)}for(const d of e.cases)if(this.translationMap[n].pseudoSwitch){const s=this.createHighlightedSpan(e.text);s.classList.add("hand"),s.addEventListener("click",(()=>this.presenter.switchEditState(e.id))),o=o.concat(this.transformToCode(d,t,n,s))}else o=o.concat(this.transformToCode(d,t+1,n));if(this.translationMap[n].pseudoSwitch&&(o[0].firstChild.innerText="if "),e.defaultOn){const d=document.createElement("span");d.classList.add("keyword"),d.id=e.defaultNode.id+"-codeLine",this.translationMap[n].pseudoSwitch?d.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].InsertCase.preDefault+this.translationMap[n].InsertCase.post)):d.appendChild(document.createTextNode(this.addIndentations(t+1)+this.translationMap[n].InsertCase.preDefault+this.translationMap[n].InsertCase.post)),d.addEventListener("mouseover",(function(){document.getElementById(e.defaultNode.id).firstChild.classList.add("highlight")})),d.addEventListener("mouseout",(function(){document.getElementById(e.defaultNode.id).firstChild.classList.remove("highlight")})),o.push(d),o=this.translationMap[n].pseudoSwitch?o.concat(this.transformToCode(e.defaultNode.followElement,t+1,n)):o.concat(this.transformToCode(e.defaultNode.followElement,t+2,n))}if(""!==this.translationMap[n].rightBracket){const e=document.createElement("span");e.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].rightBracket+"\n")),o.push(e)}return o.concat(this.transformToCode(e.followElement,t,n))}case"InsertCase":{const s=document.createElement("span");if(s.classList.add("keyword"),s.appendChild(document.createTextNode(this.addIndentations(t)+this.translationMap[n].InsertCase.preNormal)),d.appendChild(s),o){d.appendChild(o);const e=document.createElement("span");e.appendChild(document.createTextNode(" == ")),d.appendChild(e)}d.appendChild(a);const i=document.createElement("span");i.classList.add("keyword"),i.appendChild(document.createTextNode(this.translationMap[n].InsertCase.post)),d.appendChild(i);let l=[d];if(l=l.concat(this.transformToCode(e.followElement,t+1,n)),!this.translationMap[n].pseudoSwitch){const e=document.createElement("span");e.classList.add("keyword"),e.appendChild(document.createTextNode(this.addIndentations(t+1)+this.translationMap[n].InsertCase.postpost)),l.push(e)}return l}}}}prepareTransforming(){const e=document.getElementById("SourcecodeSelect").value;presenter.startTransforming(e)}displaySourcecode(e){const t=document.getElementsByClassName(e);if(this.presenter.getSourcecodeDisplay()){for(const e of t)e.setAttribute("data-tooltip","Quellcode ausblenden");document.getElementById("SourcecodeDisplay").style.display="block"}else{for(const e of t)e.setAttribute("data-tooltip","Quellcode einblenden");document.getElementById("SourcecodeDisplay").style.display="none"}}}class l{constructor(e,t){this.presenter=e,this.domRoot=t,this.printHeight=32,this.preRender()}render(e){}preRender(){const e=document.createElement("div");e.classList.add("options-element","uploadIcon","tooltip","tooltip-bottom","hand"),e.setAttribute("data-tooltip","Laden");const t=document.createElement("input");t.setAttribute("type","file"),t.addEventListener("change",(e=>this.presenter.readFile(e))),e.addEventListener("click",(()=>t.click()));const n=document.createElement("input");n.classList.add("webdriver-input"),n.setAttribute("type","file"),n.addEventListener("change",(e=>this.presenter.readFile(e))),n.style.display="none",document.getElementById("optionButtons").appendChild(n),document.getElementById("optionButtons").appendChild(e);const o=document.createElement("div");o.classList.add("options-element","saveIcon","tooltip","tooltip-bottom","hand"),o.setAttribute("data-tooltip","Speichern"),o.addEventListener("click",(()=>this.presenter.saveDialog())),document.getElementById("optionButtons").appendChild(o);const d=document.createElement("div");d.classList.add("options-element","exportIcon","tooltip","tooltip-bottom","hand"),d.setAttribute("data-tooltip","Bildexport"),d.addEventListener("click",(()=>this.exportAsPng(this.presenter.getModelTree()))),document.getElementById("optionButtons").appendChild(d)}renderTreeAsCanvas(e,t,n,o,d){if(null===e)return d;{const s=22;switch(e.type){case"InsertNode":return this.renderTreeAsCanvas(e.followElement,t,n,o,d);case"Placeholder":{t.beginPath(),t.moveTo(n,d),t.lineTo(o,d),t.moveTo(n,d),t.lineTo(n,d+this.printHeight),t.moveTo(o,d),t.lineTo(o,d+this.printHeight),t.stroke(),t.beginPath();const e=n+(o-n)/2,s=d+this.printHeight/2;return t.arc(e,s,8,0,2*Math.PI),t.moveTo(e-11,s+11),t.lineTo(e+11,s-11),t.stroke(),d+this.printHeight}case"InputNode":return t.beginPath(),t.moveTo(n,d),t.lineTo(o,d),t.moveTo(n,d),t.lineTo(n,d+this.printHeight),t.moveTo(o,d),t.lineTo(o,d+this.printHeight),t.stroke(),t.fillStyle="#fcedce",t.rect(n,d,o,this.printHeight),t.fill(),t.fillStyle="black",t.beginPath(),t.fillText("E: "+e.text,n+15,d+s),t.stroke(),this.renderTreeAsCanvas(e.followElement,t,n,o,d+this.printHeight);case"OutputNode":return t.beginPath(),t.moveTo(n,d),t.lineTo(o,d),t.moveTo(n,d),t.lineTo(n,d+this.printHeight),t.moveTo(o,d),t.lineTo(o,d+this.printHeight),t.stroke(),t.fillStyle="#fcedce",t.rect(n,d,o,this.printHeight),t.fill(),t.fillStyle="black",t.beginPath(),t.fillText("A: "+e.text,n+15,d+s),t.stroke(),this.renderTreeAsCanvas(e.followElement,t,n,o,d+this.printHeight);case"TaskNode":return t.beginPath(),t.moveTo(n,d),t.lineTo(o,d),t.moveTo(n,d),t.lineTo(n,d+this.printHeight),t.moveTo(o,d),t.lineTo(o,d+this.printHeight),t.stroke(),t.fillStyle="#fcedce",t.rect(n,d,o,this.printHeight),t.fill(),t.fillStyle="black",t.beginPath(),t.fillText(e.text,n+15,d+s),t.stroke(),this.renderTreeAsCanvas(e.followElement,t,n,o,d+this.printHeight);case"BranchNode":{t.fillStyle="rgb(250, 218, 209)",t.beginPath(),t.rect(n,d,o-n,2*this.printHeight),t.fill(),t.fillStyle="black",t.stroke(),t.beginPath(),t.moveTo(n,d),t.lineTo(n+(o-n)/2,d+2*this.printHeight),t.moveTo(o,d),t.lineTo(n+(o-n)/2,d+2*this.printHeight),t.stroke();const a=t.measureText(e.text);t.beginPath(),t.fillText(e.text,n+Math.abs(o-n-a.width)/2,d+s),t.stroke(),t.beginPath(),t.fillText("Wahr",n+15,d+this.printHeight+s),t.fillText("Falsch",o-15-t.measureText("Falsch").width,d+this.printHeight+s),t.stroke();let i=this.renderTreeAsCanvas(e.trueChild,t,n,n+(o-n)/2,d+2*this.printHeight);const l=this.renderTreeAsCanvas(e.falseChild,t,n+(o-n)/2,o,d+2*this.printHeight);return i<l&&(i=l),t.rect(n,d,o-n,i-d),t.stroke(),this.renderTreeAsCanvas(e.followElement,t,n,o,i)}case"CountLoopNode":case"HeadLoopNode":{const a=this.renderTreeAsCanvas(e.child,t,n+(o-n)/12,o,d+this.printHeight);return t.rect(n,d,o-n,a-d),t.stroke(),t.beginPath(),t.fillStyle="rgb(220, 239, 231)",t.rect(n,d,o,this.printHeight-1),t.rect(n,d,(o-n)/12-1,a-d+this.printHeight),t.fill(),t.fillStyle="black",t.beginPath(),t.fillText(e.text,n+15,d+s),t.stroke(),this.renderTreeAsCanvas(e.followElement,t,n,o,a)}case"FootLoopNode":{const a=this.renderTreeAsCanvas(e.child,t,n+(o-n)/12,o,d);return t.rect(n,d,o-n,a-d+this.printHeight),t.stroke(),t.beginPath(),t.fillStyle="rgb(220, 239, 231)",t.rect(n,d,(o-n)/12,a-d+this.printHeight),t.rect(n,a,o,this.printHeight),t.fill(),t.fillStyle="black",t.beginPath(),t.fillText(e.text,n+15,a+s),t.stroke(),t.beginPath(),t.moveTo(n+(o-n)/12,a),t.lineTo(o,a),t.stroke(),this.renderTreeAsCanvas(e.followElement,t,n,o,a+this.printHeight)}case"CaseNode":{t.fillStyle="rgb(250, 218, 209)",t.beginPath(),t.rect(n,d,o-n,2*this.printHeight),t.fill(),t.fillStyle="black";let a=e.cases.length;e.defaultOn&&(a+=1);const i=(o-n)/a,l=this.printHeight/e.cases.length;t.stroke(),t.beginPath(),t.moveTo(n,d),e.defaultOn?(t.lineTo(o-i,d+this.printHeight),t.lineTo(o,d),t.moveTo(o-i,d+this.printHeight),t.lineTo(o-i,d+2*this.printHeight)):t.lineTo(o,d+this.printHeight),t.stroke();const c=t.measureText(e.text);t.beginPath(),t.fillText(e.text,o-i-c.width/2,d+s),t.stroke();let r=n,p=d+3*this.printHeight;for(const n of e.cases){const e=this.renderTreeAsCanvas(n,t,r,r+i,d+this.printHeight);e>p&&(p=e),r+=i}if(e.defaultOn){const n=this.renderTreeAsCanvas(e.defaultNode,t,r,o,d+this.printHeight);n>p&&(p=n)}for(let o=1;o<=e.cases.length;o++)t.beginPath(),t.moveTo(n+o*i,d+o*l),t.lineTo(n+o*i,p),t.stroke();return this.renderTreeAsCanvas(e.followElement,t,n,o,p)}case"InsertCase":{const a=t.measureText(e.text);return t.beginPath(),t.fillText(e.text,n+Math.abs(o-n-a.width)/2,d+s),t.stroke(),this.renderTreeAsCanvas(e.followElement,t,n,o,d+this.printHeight)}}}}exportAsPng(e){const t=document.createElement("canvas"),n=t.getContext("2d"),o=document.getElementById("structogram").parentElement.parentElement.clientWidth;t.width=o,t.height=document.getElementById("structogram").clientHeight,n.font="16px sans-serif",n.lineWidth="1";const d=this.renderTreeAsCanvas(e,n,0,o,0);n.rect(0,0,o,d),n.stroke();const s="struktog_"+new Date(Date.now()).toJSON().substring(0,10)+".png",a=document.createElement("a");a.setAttribute("href",t.toDataURL("image/png")),a.setAttribute("download",s),a.click()}resetButtons(){}displaySourcecode(){}setLang(){}}const c={1:{model:{id:"25680378-9147-9f4d-a12d-9d10f29f",type:"InsertNode",followElement:{id:"781cb79f-2a10-7c81-aeba-740544e5",type:"TaskNode",text:"i = 5",followElement:{id:"f8dc68f6-926f-061d-9d55-8d49706c",type:"InsertNode",followElement:{id:"bbe1cba1-7448-b1ad-4348-0a254183",type:"HeadLoopNode",text:"i > 0",followElement:{id:"26a02684-af45-7a72-ab0e-ca5bbfc5",type:"InsertNode",followElement:null},child:{id:"f8b9343c-6e88-aa1b-b249-a12067e4",type:"InsertNode",followElement:{id:"f69965f8-fe5e-1eba-7345-351938e7",type:"TaskNode",text:"i = i - 1",followElement:{id:"a6908468-365d-c1be-8705-96639514",type:"InsertNode",followElement:null}}}}}}},displaySourcecode:"false",lang:"Python"},2:{model:{id:"e4c4b35a-1e09-e1cb-d55c-99ffbcbe",type:"InsertNode",followElement:{id:"cb365db9-6e23-f0d1-153b-674b15a8",type:"InputNode",text:"i",followElement:{id:"b738c9fa-d096-985f-f5a0-fa764d72",type:"InsertNode",followElement:{id:"c3e59cd0-3573-8bcb-d50e-e6ddc749",type:"TaskNode",text:"i = i * 20",followElement:{id:"a8d5103e-478e-4e20-1ea4-a492b2f2",type:"InsertNode",followElement:{id:"fc1f6373-7334-703b-bcca-02283559",type:"BranchNode",text:"i > 50",followElement:{id:"30fd4cda-ff39-d0eb-fe50-806ef7d5",type:"InsertNode",followElement:{id:"f5621fa3-d34e-7776-55b9-2c2c7c9f",type:"CaseNode",text:"i",followElement:{id:"a461498f-7491-f5b1-8a50-e2662da1",type:"InsertNode",followElement:{id:"f1843ceb-b17a-a1a1-4f6c-3102515d",type:"OutputNode",text:"i",followElement:{id:"d218754e-994d-0994-f4a8-972775e4",type:"InsertNode",followElement:null}}},defaultOn:!0,defaultNode:{id:"75694b3d-1efa-e8e5-1082-c262f79a",type:"InsertCase",text:"Sonst",followElement:{id:"363638ce-6a4e-2124-fba0-1a794a20",type:"InsertNode",followElement:{id:"eb1276f2-02d8-7af2-17eb-6f96681b",type:"TaskNode",text:"i = i % 20",followElement:{id:"1eaf9510-f707-48d1-8cda-823406b1",type:"InsertNode",followElement:{id:"a1d3dd7e-69c0-1445-655a-be690313",type:"TaskNode",text:"i = i - 1",followElement:{id:"58b3c551-c074-200b-438f-d17dad58",type:"InsertNode",followElement:null}}}}}},cases:[{id:"a13c7fc4-a5ae-3fe2-3592-e5766f5f",type:"InsertCase",text:"40",followElement:{id:"3dd9d516-6a17-7ea9-669c-89fd433e",type:"InsertNode",followElement:{id:"3d32530b-2e3a-684d-4382-4fadfa69",type:"TaskNode",text:"i = i + 2",followElement:{id:"983e9727-766e-da53-42f8-8b1faad8",type:"InsertNode",followElement:null}}}},{id:"ed7e9ba7-9dd6-81dc-6c38-8b8046cb",type:"InsertCase",text:"42",followElement:{id:"4deac4f6-7e14-e134-e9be-83019d22",type:"InsertNode",followElement:{id:"050cab51-29c2-925f-69d7-8d58c35c",type:"OutputNode",text:'"oh yeah"',followElement:{id:"14f1f3d0-8b91-a2cb-7234-90999482",type:"InsertNode",followElement:null}}}}]}},trueChild:{id:"92ca07c1-b2cf-5ef4-9496-9c3aa0b4",type:"InsertNode",followElement:{id:"20269702-9266-7c0e-10e8-6a4c74ed",type:"HeadLoopNode",text:"i > 50",followElement:{id:"ea93294b-a0a9-73a4-543d-28203269",type:"InsertNode",followElement:null},child:{id:"8f9760b5-d95e-3916-73d4-6ac2b792",type:"InsertNode",followElement:{id:"beda831e-2090-f556-54ca-8f65d263",type:"TaskNode",text:"i = i - 2",followElement:{id:"cf6a901e-d632-afc6-801e-2e31617b",type:"InsertNode",followElement:null}}}}},falseChild:{id:"581b4fdd-150e-3a53-a57c-63083fd3",type:"InsertNode",followElement:{type:"Placeholder"}}}}}}}},displaySourcecode:"true",lang:"PHP"}};window.onload=function(){if("undefined"!=typeof Storage){const t=new URL(window.location.href),n=t.searchParams.get("template");n in c&&("model"in c[n]&&(window.localStorage.tree=JSON.stringify(c[n].model),o.setTree(c[n].model)),"lang"in c[n]&&(window.localStorage.lang=c[n].lang),"displaySourcecode"in c[n]&&(window.localStorage.displaySourcecode=c[n].displaySourcecode));const d=t.searchParams.get("config");e.loadConfig(d)}!function(){const e=document.createElement("header");e.classList.add("container"),document.body.appendChild(e);const t=document.createElement("section");t.classList.add("nav-col"),e.appendChild(t);const n=document.createElement("div");n.classList.add("nav-logo-container"),t.appendChild(n);const o=document.createElement("a");o.classList.add("column","container");let d="index.html";const s=new URL(window.location.href);s.searchParams.get("config")&&(d=d+"?config="+s.searchParams.get("config")),o.setAttribute("href",d),n.appendChild(o);const a=document.createElement("div");a.classList.add("logo","logo-container"),o.appendChild(a);const i=document.createElement("strong");i.classList.add("nav-col"),i.appendChild(document.createTextNode("Struktog.")),o.appendChild(i);const l=document.createElement("section");l.classList.add("nav-col-opt"),e.appendChild(l);const c=document.createElement("div");c.classList.add("options-container"),c.setAttribute("id","optionButtons"),l.appendChild(c);const r=document.createElement("div");r.classList.add("divider"),document.body.appendChild(r);const p=document.createElement("main");document.body.appendChild(p);const h=document.createElement("div");h.classList.add("container"),h.setAttribute("id","editorDisplay"),p.appendChild(h);const u=document.createElement("div");u.classList.add("modal"),u.setAttribute("id","IEModal"),p.appendChild(u);const m=document.createElement("div");m.classList.add("modal-overlay"),m.setAttribute("aria-label","Close"),m.addEventListener("click",(()=>{document.getElementById("IEModal").classList.remove("active")})),u.appendChild(m);const f=document.createElement("div");f.classList.add("modal-container"),u.appendChild(f);const E=document.createElement("div");E.classList.add("modal-header"),f.appendChild(E);const C=document.createElement("div");C.classList.add("close","hand","cancelIcon"),C.addEventListener("click",(()=>{document.getElementById("IEModal").classList.remove("active")})),E.appendChild(C);const g=document.createElement("div");g.classList.add("modal-body"),f.appendChild(g);const L=document.createElement("div");L.classList.add("content"),L.setAttribute("id","modal-content"),g.appendChild(L);const v=document.createElement("div");v.classList.add("modal-footer","container"),v.setAttribute("id","modal-footer"),f.appendChild(v);const y=document.createElement("footer");y.classList.add("container"),document.body.appendChild(y);const N=document.createElement("div");N.classList.add("column"),y.appendChild(N);const w=document.createElement("span");w.appendChild(document.createTextNode("v1.2 Didaktik der Informatik der TU Dresden")),N.appendChild(w)}();const t=new d(o);o.setPresenter(t);const n=new a(t,document.getElementById("editorDisplay"));t.addView(n);const s=new i(t,document.getElementById("editorDisplay"));t.addView(s);const r=new l(t,document.getElementById("Export"));t.addView(r),function(e){const t=document.createElement("div");t.classList.add("options-element","infoIcon","tooltip","tooltip-bottomInfo","hand"),t.setAttribute("data-tooltip","Gitlab Repository"),t.addEventListener("click",(()=>{window.open("https://gitlab.com/ddi-tu-dresden/cs-school-tools/struktog","_blank")})),e.appendChild(t)}(document.getElementById("optionButtons")),t.init()}})()})();